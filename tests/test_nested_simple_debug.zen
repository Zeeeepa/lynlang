// Simplified nested test for debugging
{ io, Result } = @std

main = () i32 {
    // Step 1: Create inner Result
    inner = Result.Ok(42)
    io.println("Created inner Result.Ok(42)")
    
    // Step 2: Create outer Result with inner as payload
    outer = Result.Ok(inner)
    io.println("Created outer Result.Ok(inner)")
    
    // Step 3: Extract outer payload directly
    outer ?
        | Result.Ok(inner_result) {
            io.println("Got outer Result.Ok")
            
            // Step 4: Check the inner result
            inner_result ?
                | Result.Ok(val) {
                    io.println("Inner value: ${val}")
                    val == 42 ? 
                        | true { return 0 }
                        | false { return 1 }
                }
                | Result.Err(e) {
                    io.println("Inner error!")
                    return 2
                }
        }
        | Result.Err(e) {
            io.println("Outer error!")
            return 3
        }
}