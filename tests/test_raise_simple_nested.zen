// Test simple nested Result.raise() - currently broken
// Issue: Nested Result payload extraction fails
{ io, Result } = @std

main = () void {
    io.println("Testing simple nested Result.raise()")
    
    // Direct inline construction - this is where the issue occurs
    outer = Result.Ok(Result.Ok(100))
    
    // Try to extract with pattern matching
    outer ?
        | Result.Ok(inner) {
            inner ?
                | Result.Ok(val) { 
                    io.println("Pattern match value: ${val}")
                    val == 100 ?
                        | true { io.println("✓ Pattern match works") }
                        | false { io.println("✗ Pattern match failed: got ${val}") }
                }
                | Result.Err(e) { io.println("Inner error: ${e}") }
        }
        | Result.Err(e) { io.println("Outer error: ${e}") }
    
    // Try with raise()
    outer2 = Result.Ok(Result.Ok(200))
    inner2 = outer2.raise()
    value2 = inner2.raise()
    
    io.println("Raise value: ${value2}")
    value2 == 200 ?
        | true { io.println("✓ Raise works") }
        | false { io.println("✗ Raise failed: got ${value2}") }
}