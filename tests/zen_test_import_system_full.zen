// Comprehensive test of the import system
// Tests all aspects of module imports without comptime wrapper

// Standard library imports using @std notation
io = @std
math = @std
core = @std

// Test import usage in functions
test_math_functions = () bool   {
    // Test integer abs
    x := math.abs(-42)
    x != 42 ?
        | true {
            io.print("FAIL: math.abs(-42) returned ")
            io.print_int(x)
            io.print("\n")
            return false
        }
        | false {}
    
    // Test float operations
    y := math.sqrt(16.0)
    y != 4.0 ?
        | true {
            io.print("FAIL: math.sqrt(16.0) incorrect\n")
            return false
        }
        | false {}
    
    return true
}

// Test io functions
test_io_functions = () bool   {
    io.print("Testing IO functions: ")
    io.print("string output, ")
    io.print_int(123)
    io.print(", ")
    io.print_float(3.14)
    io.println(" - OK")
    return true
}

// Test core functions (when available)
test_core_functions = () bool   {
    // Test assert (should not fail)
    core.assert(true)
    
    // Can't easily test panic without crashing
    io.print("Core functions available\n")
    return true
}

// Test that imports are module-level only
verify_module_level_imports = () bool   {
    // This function exists to document that imports
    // cannot be inside functions or comptime blocks
    io.print("Imports are module-level only: OK\n")
    return true
}

// Main test runner
main = () i32   {
    io.println("=== Zen Import System Test Suite ===\n")
    
    all_passed ::= true
    
    io.print("1. Math functions: ")
    test_math_functions() ?
        | true {
            io.println("PASS")
        }
        | false {
            io.println("FAIL")
            all_passed = false
        }
    
    io.print("2. IO functions: ")
    test_io_functions() ?
        | true {
            io.println("PASS")
        }
        | false {
            io.println("FAIL")
            all_passed = false
        }
    
    io.print("3. Core functions: ")
    if test_core_functions() {
        io.println("PASS")
    } | false {
        io.println("FAIL")
        all_passed = false
    }
    
    io.print("4. Module-level imports: ")
    if verify_module_level_imports() {
        io.println("PASS")
    } | false {
        io.println("FAIL")
        all_passed = false
    }
    
    io.println("\n=== Test Results ===")
    if all_passed {
        io.println("All tests PASSED!")
        return 0
    } | false {
        io.println("Some tests FAILED!")
        return 1
    }
}