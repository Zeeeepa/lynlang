// Comprehensive test for string.char_at() method
{ io } = @std

main = () i32 {
    // Test with different strings
    hello ::= "Hello, World!"
    empty ::= ""
    single ::= "A"
    unicode_ascii ::= "Zen"
    
    // Test regular characters
    io.println("Testing 'Hello, World!':")
    io.println("  char_at(0) = ${hello.char_at(0)}")  // H = 72
    io.println("  char_at(7) = ${hello.char_at(7)}")  // W = 87
    io.println("  char_at(12) = ${hello.char_at(12)}") // ! = 33
    
    // Test with single character string
    io.println("Testing single char 'A':")
    io.println("  char_at(0) = ${single.char_at(0)}")  // A = 65
    
    // Test with string literals directly
    io.println("Testing string literal:")
    io.println("  '123'[0] = ${"123".char_at(0)}")     // 1 = 49
    io.println("  '123'[1] = ${"123".char_at(1)}")     // 2 = 50
    io.println("  '123'[2] = ${"123".char_at(2)}")     // 3 = 51
    
    // Test with special characters
    special ::= "!@#$%"
    io.println("Testing special chars '!@#$%':")
    io.println("  char_at(0) = ${special.char_at(0)}")  // ! = 33
    io.println("  char_at(1) = ${special.char_at(1)}")  // @ = 64
    io.println("  char_at(2) = ${special.char_at(2)}")  // # = 35
    
    // Test with spaces and tabs
    whitespace ::= " \t"
    io.println("Testing whitespace:")
    io.println("  space = ${whitespace.char_at(0)}")    // space = 32
    io.println("  tab = ${whitespace.char_at(1)}")      // tab = 9
    
    // Test chaining with arithmetic
    result ::= "ABC".char_at(0) + "ABC".char_at(1) + "ABC".char_at(2)
    io.println("Sum of 'ABC' chars: ${result}")  // 65 + 66 + 67 = 198
    
    // Test in conditional
    first_char ::= "Test".char_at(0)
    first_char == 84 ? 
        | true { io.println("First char of 'Test' is 'T' (84)") }
        | false { io.println("Unexpected char value") }
    
    return 0
}