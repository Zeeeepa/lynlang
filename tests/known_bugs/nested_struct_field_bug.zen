// Test inferred types issue
{ io } = @std

Point: {
    x: f64,
    y: f64,
}

Rectangle: {
    top_left: Point,
    bottom_right: Point,
}

rect_area = (r: Rectangle) f64 {
    width: f64 = r.bottom_right.x - r.top_left.x
    height: f64 = r.bottom_right.y - r.top_left.y
    return width * height
}

main = () void {
    // Create points separately to avoid struct nesting bug
    top_left = Point { x: 0.0, y: 0.0 }
    bottom_right = Point { x: 10.0, y: 5.0 }

    rect = Rectangle {
        top_left: top_left,
        bottom_right: bottom_right
    }

    io.println("Rectangle area: ${rect_area(rect)}")
}