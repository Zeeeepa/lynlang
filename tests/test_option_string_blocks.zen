// Test Option<String> with block-based pattern matching
{ io , get_default_allocator} = @std

main = () i32 {
    alloc = get_default_allocator()
    // Test with StaticString payload - use blocks instead of arrow functions
    msg = Some("hello")
    
    msg_result = msg ?
        | .Some(s) {
            s  // Return the StaticString
        }
        | .None {
            "nothing"  // Return a default StaticString
        }
    
    io.println("Message result: ${msg_result}")
    
    // Test with None case
    empty = None
    empty_result = empty ?
        | .Some(s) {
            s
        }
        | .None {
            "empty"
        }
    
    io.println("Empty result: ${empty_result}")
    
    0
}