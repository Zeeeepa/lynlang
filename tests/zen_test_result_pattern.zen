// Test Result pattern matching in expression context
{ io } = @std

Option<T>: Some(T) | None
Result<T, E>: Ok(T) | Err(E)

// Function with pattern matching as expression
test_pattern = () Result<i32, string> {
    maybe: Option<i32> = Some(42)
    
    // Pattern matching in expression context (not statement)
    maybe ?
        | Some(val) { return Ok(val) }
        | None { return Err("no value") }
}

main = () void {
    io.println("Testing pattern matching")
    result = test_pattern()
    
    result ?
        | Ok(val) { io.println("Got value") }
        | Err(e) { io.println("Got error") }
}