// Test nested Result from function
{ io, Result } = @std

get_nested = () Result<Result<i32, string>, string> {
    Result.Ok(Result.Ok(42))
}

main = () i32 {
    // Get nested from function
    outer = get_nested()
    
    // Extract outer
    outer ?
        | Result.Ok(inner) {
            io.println("Got outer Ok")
            
            // Extract inner
            inner ?
                | Result.Ok(val) {
                    io.println("Inner value: ${val}")
                    val == 42 ?
                        | true { 
                            io.println("✓ Correct!")
                            0
                        }
                        | false { 
                            io.println("✗ Wrong: ${val}")
                            1
                        }
                }
                | Result.Err(e) {
                    io.println("Inner error: ${e}")
                    2
                }
        }
        | Result.Err(e) {
            io.println("Outer error: ${e}")
            3
        }
}
