{ io, Result , get_default_allocator} = @std

main = () void {
    alloc = get_default_allocator()
    io.println("=== Testing Double Nested Result ===")
    
    // Create a double nested Result
    inner = Result.Ok(42)
    outer = Result.Ok(inner)
    
    // Extract value
    outer ?
        | Result.Ok(inner_result) {
            io.println("Outer Ok extracted")
            inner_result ?
                | Result.Ok(val) {
                    io.println("Value: ${val}")
                    val == 42 ?
                        | true { io.println("✓ Double nested Result works!") }
                        | false { io.println("✗ Wrong value: ${val}") }
                }
                | Result.Err(e) { io.println("Inner error: ${e}") }
        }
        | Result.Err(e) { io.println("Outer error: ${e}") }
}