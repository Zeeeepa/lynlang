// Test @this.defer() functionality
{ io } = @std

main = () void {
    io.println("Start of main")
    
    // Test defer with direct expression
    @this.defer(io.println("Deferred 1 - should execute last"))
    
    io.println("Middle of main")
    
    // Multiple defers should execute in LIFO order
    @this.defer(io.println("Deferred 2 - should execute second"))
    @this.defer(io.println("Deferred 3 - should execute first"))
    
    io.println("End of main")
    
    // Expected output:
    // Start of main
    // Middle of main
    // End of main
    // Deferred 3 - should execute first
    // Deferred 2 - should execute second
    // Deferred 1 - should execute last
}