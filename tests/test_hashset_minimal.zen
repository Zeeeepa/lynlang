// Minimal HashSet test
{ io, HashSet, get_default_allocator} = @std

main = () i32 {
    io.println("Starting HashSet test")
    alloc = get_default_allocator()
    io.println("Got allocator")
    
    // This line seems to cause the issue
    set = HashSet<i32>(alloc)
    io.println("Created HashSet")
    
    // Try to add an element
    result = set.add(10)
    result ?
        | true { io.println("Successfully added 10") }
        | false { io.println("Failed to add 10") }
    
    // Check if it contains 10
    has10 = set.contains(10)
    has10 ?
        | true { io.println("Contains 10: correct") }
        | false { io.println("ERROR: Should contain 10") }
    
    // Try to add duplicate
    result2 = set.add(10)
    result2 ?
        | true { io.println("ERROR: Added duplicate") }
        | false { io.println("Correctly rejected duplicate") }
    
    return 0
}