// Test HashMap pattern matching on Option
{ io, HashMap , get_default_allocator } = @std

// Simple hash function for strings
string_hash = (s: StaticString) i64 {
    return 42 as i64
}

// Equality function for strings  
string_eq = (a: StaticString, b: StaticString) bool {
    cmp ::= a == b
    cmp ? { 
        return true 
    }
    return false
}

main = () i32 {
    alloc = get_default_allocator()
    io.println("Testing HashMap Option pattern matching...")
    
    // Create HashMap<StaticString, i32>
    map ::= HashMap<StaticString, i32>(alloc)
    
    // Insert a key-value pair
    map.insert("test", 123, string_hash, string_eq)
    
    // Try to get the value
    result ::= map.get("test", string_hash, string_eq)
    
    // Pattern match on the result
    result ?
        | .Some(value) { io.println("Found value: ${value}") }
        | .None { io.println("Key not found") }
    
    return 0
}
