// Test simple closure with explicit Result return
{ io, Result } = @std

main = () i32 {
    // Test 1: Simple closure returning Result.Ok
    get_value = () {
        io.println("In closure, about to return Result.Ok(42)")
        return Result.Ok(42)
    }
    
    io.println("Created closure")
    
    // Call the closure directly
    result = get_value()
    io.println("Called closure")
    
    // Pattern match on result
    result ?
        | Result.Ok(val) { 
            io.println("Got Ok with value: ${val}")
            val == 42 ? { return 0 }
        }
        | Result.Err(err) { 
            io.println("Got Err: ${err}")
            return 1
        }
    
    return 2
}