// Test closure with conditional and division
{ io, Result } = @std

main = () i32 {
    divide = (a: f64, b: f64) Result<f64, string> {
        // Store b first
        b_val = b
        // Add conditional
        result = b_val == 0.0 ?
            | true { Result.Err("Division by zero") }
            | false { Result.Ok(a / b_val) }
        return result
    }
    
    val = divide(10.0, 2.0).raise()
    
    // Pattern match with return in false branch
    val == 5.0 ?
        | true { io.println("Pass") }
        | false {
            io.println("Fail")
            return 1
        }
    
    return 0
}