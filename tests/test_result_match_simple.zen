// Simple test for Result pattern matching return values
{ io, Result } = @std

test_match_return = () Result<i32, string> {
    x = Result.Ok(42)
    
    // This pattern match should return a Result type
    return x ? 
        | .Ok(v) { Result.Ok(v * 2) }
        | .Err(e) { Result.Err(e) }
}

main = () i32 {
    result = test_match_return()
    
    // Extract the value
    final_val = result ?
        | .Ok(val) { val }
        | .Err(e) { 0 }
    
    // Check that we got the expected value
    final_val == 84 ?
        | true { 
            io.println("✅ Test PASSED: Got expected value 84")
            return 0
        }
        | false {
            io.println("❌ Test FAILED: Expected 84, got ${final_val}")
            return 1
        }
}