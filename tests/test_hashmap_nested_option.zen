// Test HashMap with nested Option
{ io, get_default_allocator, HashMap, Option, Some, None } = @std

main = () i32 {
    alloc = get_default_allocator()
    
    // HashMap with Option<i32> values
    map = HashMap<String, Option<i32>>(alloc)
    
    map.insert("key1", Some(42))
    map.insert("key2", None)
    
    val = map.get("key1")
    
    val ?
        | Some(opt) {
            opt ?
                | Some(v) { io.print_int(v) }
                | None { io.println("Value is None") }
        }
        | None { io.println("Key not found") }
    
    return 0
}