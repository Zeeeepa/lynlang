// Debug nested pattern matching
extern printf = (format: *i8, ...) i32

classify = (x: i32, y: i32) i32 {
    // This is what's failing - nested conditionals
    return x == 0 ? 
        | true => y == 0 ? | true => 0 | false => 1
        | false => y == 0 ? | true => 2 | false => 3
}

// Alternative working version with explicit if-else
classify_working = (x: i32, y: i32) i32 {
    return x == 0 ? 
        | true => (y == 0 ? | true => 0 | false => 1)
        | false => (y == 0 ? | true => 2 | false => 3)
}

main = () i32 {
    printf("Testing nested conditionals:\n")
    printf("classify(0,0) = %d (expect 0)\n", classify(0, 0))
    printf("classify(0,1) = %d (expect 1)\n", classify(0, 1))
    printf("classify(1,0) = %d (expect 2)\n", classify(1, 0))
    printf("classify(1,1) = %d (expect 3)\n", classify(1, 1))
    
    printf("\nWorking version:\n")
    printf("classify_working(0,0) = %d\n", classify_working(0, 0))
    printf("classify_working(0,1) = %d\n", classify_working(0, 1))
    printf("classify_working(1,0) = %d\n", classify_working(1, 0))
    printf("classify_working(1,1) = %d\n", classify_working(1, 1))
    
    return 0
}