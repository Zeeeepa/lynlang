// Option type for nullable values
// No null! Only Option types

// Option type - represents a value that may or may not exist
Option<T>:
Some: T,
None

// Create Some variant
some<T> = (value: T) Option<T> {
    return Option.Some(value)
}

// Create None variant
none<T> = () Option<T> {
    return Option.None
}

// Check if option has value
is_some<T> = (opt: Option<T>) bool {
    opt ?
        | Some(_) { true }
        | None { false }
}

// Check if option is none
is_none<T> = (opt: Option<T>) bool {
    opt ?
        | Some(_) { false }
        | None { true }
}

// Map: transform the value inside
map<T, U> = (opt: Option<T>, f: (T) U) Option<U> {
    opt ?
        | Some(val) { Option.Some(f(val)) }
        | None { Option.None }
}

// Unwrap with default value
unwrap_or<T> = (opt: Option<T>, default: T) T {
    opt ?
        | Some(val) { val }
        | None { default }
}

// Get value or panic
unwrap<T> = (opt: Option<T>) T {
    opt ?
        | Some(val) { val }
        | None { @std.core.panic("unwrap called on None") }
}
